## é¡¹ç›®åç§°
å¾®ä¿¡å…¬ä¼—å·å¼€å‘
## é¡¹ç›®ä»‹ç»
æœ¬é¡¹ç›®é‡‡ç”¨nodeæ¥å¯¹å½“ä¸‹ç«çƒ­çš„å¾®ä¿¡å…¬ä¼—å·è¿›è¡Œå¼€å‘
## é¡¹ç›®å‡†å¤‡
### 1.è¿›å…¥å¾®ä¿¡å…¬ä¼—å¹³å°å®˜ç½‘[https://mp.weixin.qq.com]

â€‹	ç”¨QQå·æˆ–é‚®ç®±æ³¨å†Œè®¢é˜…å·ï¼ˆå³å…¬ä¼—å·ï¼‰

![1](C:\Users\ç«¥çœŸçš„æ®‹éª¸\OneDrive\æ¡Œé¢\Github\wxå…¬ä¼—å·\wx-node-\readmeé…å›¾\1.png)

â€‹	æ³¨å†Œå®Œåç™»å½•ï¼Œåœ¨å·¦ä¾§èœå•æ é‡Œæ‰¾åˆ°è®¾ç½®>å…¬ä¼—å·è®¾ç½®,å¡«å†™ç›¸åº”å†…å®¹å¦‚ä¸‹ï¼š

![1](C:\Users\ç«¥çœŸçš„æ®‹éª¸\OneDrive\æ¡Œé¢\Github\wxå…¬ä¼—å·\wx-node-\readmeé…å›¾\2.png)

â€‹	åœ¨[åŠŸèƒ½é…ç½®]ä¸‹:

â€‹	å›¾ä¸­çš„jså®‰å…¨åŸŸåè®¾ç½®åˆ°è‡ªå·±çš„åŸŸåä¸‹çš„mpæ–‡ä»¶ä¸‹ï¼›

â€‹	æ³¨æ„ï¼šç‚¹å‡»è®¾ç½®æ—¶éœ€ä¸‹è½½ä¸€ä¸ªéªŒè¯æ–‡ä»¶MP_verify_wtaRuDM3HTZJfW1d.txtï¼Œå°†å…¶æ”¾åœ¨mpæ–‡ä»¶ç›®å½•ä¸‹

![img](C:\Users\ç«¥çœŸçš„æ®‹éª¸\OneDrive\æ¡Œé¢\Github\wxå…¬ä¼—å·\wx-node-\readmeé…å›¾\3.png)

### 2.ç”¨æµ‹è¯•å·æ¥è¿›è¡Œæ¥å£é…ç½®

â€‹	æµ‹è¯•å·åœ¨å¼€å‘è€…å·¥å…·ä¸­ï¼Œå·¦ä¾§è¾¹æ æœ€ä¸‹éƒ¨åˆ†æ‰¾åˆ°å¼€å‘è€…å·¥å…·ï¼Œç‚¹å‡»å¹³å°æµ‹è¯•å·ï¼Œç™»å½•åï¼Œè¿›è¡Œæ¥å£é…ç½®ï¼›

æ¥å£éªŒè¯é€»è¾‘å›¾å¦‚ä¸‹ï¼ˆä¸‹å›¾æ˜¯å¾®ä¿¡å…¬ä¼—å¹³å°ä¸­å¼€å‘æ–‡æ¡£é‡Œçš„ï¼‰ï¼š

â€‹	![1](C:\Users\ç«¥çœŸçš„æ®‹éª¸\OneDrive\æ¡Œé¢\Github\wxå…¬ä¼—å·\wx-node-\readmeé…å›¾\4.jpg)

#### 	2.1åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹wechatï¼ˆæ–‡ä»¶åè‡ªå–ï¼‰ï¼Œé‡Œé¢å»ºç«‹app.js



#### 	2.2åœ¨app.jsä¸­ç¼–å†™æ¥å£éªŒè¯ä»£ç 

```js
//app.js
`use strict`
  var Koa = require('koa')
  var sha1 = require('sha1')
  var port = 1234 //æœ¬åœ°è¿è¡Œæˆ‘ç”¨çš„1234ç«¯å£
  var config = {
    wechat: {
      appID: 'wx7006fdefd0a1d63a',
      appSecret: '62dc9f5d669da95f22894e26b9547b50',
      token: 'wuyu'
    }
  }
  var app = new Koa()
  app.use(function*(next) {
    console.log(this.query)

    var token = config.wechat.token
    var signature = this.query.signature
    var timestamp = this.query.timestamp
    var nonce = this.query.nonce
    var echostr = this.query.echostr
    var list = [token, timestamp, nonce].sort().join('')
    var sha = sha1(list)
    if (sha == signature) {
      this.body = echostr + ''
    } else {
      this.body = 'è¯·æ±‚å¤±è´¥ğŸ˜™'
    }
  })
  app.listen(port)
  console.log('ç»™æˆ‘é«˜é«˜é£èµ·æ¥å•Šï¼š' + port)
```

â€‹	åˆ©ç”¨å‘½ä»¤è¡Œå·¥å…·æˆ–gitå·¥å…·è¿è¡Œapp.jsï¼š

â€‹	`node app`

#### 	2.3åœ¨æœ¬åœ°å¼€èµ·æœåŠ¡å™¨ï¼ˆæˆ‘è¿™é‡Œçš„èŠ±ç”Ÿå£³ç‰ˆæœ¬ä¸º5.0ï¼Œä¸åŒç‰ˆæœ¬è¯·å‚ç…§ç™¾åº¦ï¼‰

â€‹	è¿™é‡Œé‡‡ç”¨èŠ±ç”Ÿå£³å†…ç½‘æ˜ å°„å·¥å…·ï¼Œåœ¨è½¯ä»¶ç®¡ç†ï¼ˆæˆ‘çš„æ˜¯ç”µè„‘ç®¡å®¶é‡Œé¢çš„ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚è‡ªè¡Œä¸‹è½½ï¼‰ä¸­ä¸‹è½½ï¼Œä¸‹è½½å®Œå®‰è£…åï¼Œæ ¹æ®æç¤ºå»æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œæ³¨å†Œå¥½åä¸è¦ä¹°åŸŸåï¼Œè½¯ä»¶é€äº†ä¸€ä¸ªï¼Œè¿”å›åº”ç”¨ç™»å½•ï¼Œç‚¹å‡»â€œ+â€æ·»åŠ ä½ çš„ç”µè„‘ipï¼ˆä¸çŸ¥é“çš„æœ¬æœºipçš„æŒ‰ä¸‹win+ræ‰“å¼€è¿è¡Œè¾“å…¥cmdè¿›å…¥å‘½ä»¤è¡Œå·¥å…·è¾“å…¥ipconfigæŒ‰ä¸‹å›è½¦ï¼Œå‡ºæ¥çš„ipv4åçš„æ•°å­—å³ä¸ºæœ¬æœºipï¼‰å’Œç«¯å£å·ï¼ˆæœ¬åœ°å¼€ç«¯å£å·éšæ„ï¼Œæˆ‘è¿™é‡Œå¼€çš„æ˜¯1234ï¼‰ã€‚

![img](C:\Users\ç«¥çœŸçš„æ®‹éª¸\OneDrive\æ¡Œé¢\Github\wxå…¬ä¼—å·\wx-node-\readmeé…å›¾\5.png)

â€‹	ç‚¹å‡»ä¿å­˜åï¼Œç”Ÿæˆçš„å†…ç½‘æ˜ å°„åº”ç”¨é‡Œçš„è®¿é—®åœ°å€å°±æ˜¯èµ é€ç»™ä½ çš„åŸŸååŠ ç«¯å£å·

![img](C:\Users\ç«¥çœŸçš„æ®‹éª¸\OneDrive\æ¡Œé¢\Github\wxå…¬ä¼—å·\wx-node-\readmeé…å›¾\6.png)

â€‹	å¼€å¯åæ˜ å°„å‡ºæ¥çš„é‚£ä¸ªåŸŸåå°±æ˜¯æ¥å£é…ç½®ä¸­è¦å¡«å†™çš„urlï¼ˆæ³¨æ„åŠ ä¸Šhttp://ï¼‰ç‚¹å‡»æäº¤å°±å¯ä»¥äº†ï¼Œå¦‚æœå¼¹å‡ºé…ç½®å¤±è´¥è¯·è‡ªè¡Œæ£€æŸ¥ä»£ç ï¼ï¼ï¼

![1](C:\Users\ç«¥çœŸçš„æ®‹éª¸\OneDrive\æ¡Œé¢\Github\wxå…¬ä¼—å·\wx-node-\readmeé…å›¾\7.png)

â€‹

## æœ€åç›¸å…³ç½‘ç«™å‚è€ƒå¦‚ä¸‹ï¼š

å¾®ä¿¡å¼€å‘æŠ€æœ¯æ–‡æ¡£ï¼š[https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1433401084](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421137025)ï¼›
